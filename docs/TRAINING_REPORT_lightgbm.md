# 메이플스토리 아이템 시세 예측 모델 훈련 리포트

**생성 일시**: 2025-11-03 21:33:54

---

## 📊 실행 요약

이 리포트는 MySQL 데이터베이스의 모든 거래 데이터를 사용하여 훈련된 아이템 시세 예측 모델의 성능을 정리합니다.

### 모델 정보
- **모델 타입**: Random Forest Regressor
- **데이터셋**: 전체 데이터베이스 데이터 (제한 없음)
- **데이터 분할**: Train 70%, Validation 10%, Test 20%
- **분할 방식**: 랜덤 샘플링 (시간 특징은 유지하여 시간 패턴 학습 가능)

---

## 📈 모델 성능 지표

### Train Set (훈련 데이터)

| 지표 | 값 | 설명 |
|------|-----|------|
| **RMSE** | 1,612,755,652.11 | 16.13억 |
| **MAE** | 191,396,178.28 | 1.91억 |
| **R² Score** | 0.9699 | 96.99% 설명력 |
| **MAPE** | 4412.47% | 평균 절대 백분율 오차 |

### Validation Set (검증 데이터)

| 지표 | 값 | 설명 |
|------|-----|------|
| **RMSE** | 3,329,347,631.68 | 33.29억 |
| **MAE** | 506,750,784.76 | 5.07억 |
| **R² Score** | 0.8299 | 82.99% 설명력 |
| **MAPE** | 14241.36% | 평균 절대 백분율 오차 |

### Test Set (테스트 데이터)

| 지표 | 값 | 설명 |
|------|-----|------|
| **RMSE** | 6,388,048,560.24 | 63.88억 |
| **MAE** | 532,778,646.83 | 5.33억 |
| **R² Score** | 0.6270 | 62.70% 설명력 |
| **MAPE** | 44968.69% | 평균 절대 백분율 오차 |

---

## 🔍 성능 분석

### 1. 모델 일반화 성능

- **Train vs Test R² 차이**: 0.3429
  - 차이가 작을수록 과적합이 적습니다
  - 차이가 크면 과적합 가능성이 있습니다

- **Train vs Test RMSE 비율**: 3.96x
  - 테스트 세트의 RMSE가 훈련 세트보다 3.96배 높습니다

### 2. 예측 정확도

- **평균 절대 오차 (MAE)**: 5.33억
  - 평균적으로 예측 가격과 실제 가격의 차이가 5.33억 정도입니다

- **평균 절대 백분율 오차 (MAPE)**: 44968.69%
  - 예측 오차가 평균적으로 44968.69% 수준입니다

### 3. 모델 설명력

- **R² Score (Test)**: 0.6270 (62.70%)
  - 모델이 가격 변동의 약 62.70%를 설명합니다
  - 보통한 수준입니다

---

## 🎯 주요 특징 중요도 (Top 20)

모델이 가격 예측에 사용한 주요 특징들의 중요도 순위입니다:

| 순위 | 특징명 | 중요도 | 비율 |
|------|--------|--------|------|
| 1 | `detail_PAD_max` | 0.284310 | 28.43% |
| 2 | `detail_MAD_max` | 0.100951 | 10.10% |
| 3 | `additional_grade` | 0.078911 | 7.89% |
| 4 | `payload_potential_grade` | 0.054572 | 5.46% |
| 5 | `potential_grade` | 0.054350 | 5.44% |
| 6 | `payload_trade_sn` | 0.046283 | 4.63% |
| 7 | `detail_PAD_sum` | 0.032243 | 3.22% |
| 8 | `detail_scroll_DEX_sum` | 0.025103 | 2.51% |
| 9 | `payload_item_id` | 0.024785 | 2.48% |
| 10 | `item_id` | 0.024020 | 2.40% |
| 11 | `name` | 0.023721 | 2.37% |
| 12 | `detail_MAD_sum` | 0.022894 | 2.29% |
| 13 | `detail_scroll_DEX_max` | 0.020547 | 2.05% |
| 14 | `detail_percent_IMDR_sum` | 0.018946 | 1.89% |
| 15 | `additional_has_damage` | 0.013875 | 1.39% |
| 16 | `detail_cuttable` | 0.013442 | 1.34% |
| 17 | `detail_scroll_INT_max` | 0.012178 | 1.22% |
| 18 | `hour` | 0.010877 | 1.09% |
| 19 | `detail_scroll_STR_sum` | 0.010867 | 1.09% |
| 20 | `detail_PDD_max` | 0.009767 | 0.98% |


---

## 💡 주요 특징 분석

### 가장 중요한 특징 Top 10

1. **detail_PAD_max**
   - 중요도: 0.284310
   - 특징 설명: PAD 관련 능력치

2. **detail_MAD_max**
   - 중요도: 0.100951
   - 특징 설명: MAD 관련 능력치

3. **additional_grade**
   - 중요도: 0.078911
   - 특징 설명: 에디셔널 등급

4. **payload_potential_grade**
   - 중요도: 0.054572
   - 특징 설명: 잠재능력 등급

5. **potential_grade**
   - 중요도: 0.054350
   - 특징 설명: 잠재능력 등급

6. **payload_trade_sn**
   - 중요도: 0.046283
   - 특징 설명: 기타 특징

7. **detail_PAD_sum**
   - 중요도: 0.032243
   - 특징 설명: PAD 관련 능력치

8. **detail_scroll_DEX_sum**
   - 중요도: 0.025103
   - 특징 설명: DEX 스크롤 증가량

9. **payload_item_id**
   - 중요도: 0.024785
   - 특징 설명: 아이템 ID (payload에서)

10. **item_id**
   - 중요도: 0.024020
   - 특징 설명: 아이템 ID

---

## 📝 결론 및 권장사항

### 모델 성능 요약

1. **전반적인 성능**: 보통
   - R² Score가 0.6270로 가격 변동의 상당 부분을 잘 설명합니다

2. **예측 정확도**: 낮음
   - MAPE가 44968.69%로 개선이 필요한 수준입니다

3. **과적합 여부**: 과적합 가능성 있음
   - Train R²와 Test R²의 차이가 0.3429입니다

### 개선 권장사항

- **과적합 완화**: Train/Test 성능 차이가 큽니다. 정규화 강화, 모델 복잡도 감소, 또는 더 많은 데이터 수집 고려
- **모델 성능 개선**: 더 많은 특징 엔지니어링, 다른 모델 시도 (Gradient Boosting, XGBoost 등), 하이퍼파라미터 튜닝 고려
- **예측 정확도 개선**: 가격 범위가 넓어서 오차가 큽니다. 로그 변환, 가격 범위별 모델 분리, 이상치 처리 고려


---

## 📁 저장된 파일

모델 및 전처리 파이프라인은 다음 위치에 저장되었습니다:

- `models/price_prediction_model.joblib`: 훈련된 모델
- `models/scaler.joblib`: 특징 스케일러
- `models/label_encoders.joblib`: 범주형 변수 인코더
- `models/feature_importance.json`: 특징 중요도 (JSON)
- `models/metrics.json`: 성능 지표 (JSON)

---

**보고서 생성 완료**: 2025-11-03 21:33:54
